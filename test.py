import streamlit as st
import random

# ======================
# 운동 데이터
# ======================
exercise_data = {
    "유산소 운동": {
        "조깅": {"난이도": "⭐⭐", "설명": "심폐 지구력을 높이는 기본 유산소 운동"},
        "자전거 타기": {"난이도": "⭐⭐", "설명": "무릎에 무리가 적은 유산소 운동"},
        "줄넘기": {"난이도": "⭐⭐⭐", "설명": "짧은 시간에 칼로리 소모가 큰 운동"},
        "수영": {"난이도": "⭐⭐⭐", "설명": "전신 근육을 사용해 체력과 지구력을 키움"},
        "등산": {"난이도": "⭐⭐⭐", "설명": "지구력 강화와 하체 근육 발달에 효과적"}
    },
    "근력 강화": {
        "웨이트 트레이닝": {"난이도": "⭐⭐⭐⭐", "설명": "근육량 증가와 체형 개선에 효과적"},
        "필라테스": {"난이도": "⭐⭐⭐", "설명": "코어 강화와 유연성 향상에 도움"},
        "푸쉬업/스쿼트": {"난이도": "⭐⭐", "설명": "맨몸으로 언제든 할 수 있는 기본 근력 운동"},
        "크로스핏": {"난이도": "⭐⭐⭐⭐⭐", "설명": "고강도 근력·체력 종합 훈련"},
        "케틀벨 운동": {"난이도": "⭐⭐⭐", "설명": "전신 근육을 사용하는 근력+유산소 복합 운동"}
    },
    "유연성 & 재활": {
        "요가": {"난이도": "⭐⭐", "설명": "심신 안정과 유연성 향상에 도움"},
        "스트레칭": {"난이도": "⭐", "설명": "부상 예방과 피로 회복에 필수적"},
        "재활 운동": {"난이도": "⭐⭐", "설명": "부상 회복과 약해진 부위 보강에 적합"},
        "태극권": {"난이도": "⭐⭐", "설명": "부드러운 동작으로 몸의 균형과 안정성 강화"}
    },
    "스포츠": {
        "축구": {"난이도": "⭐⭐⭐", "설명": "체력, 지구력, 협동심을 동시에 기르는 운동"},
        "농구": {"난이도": "⭐⭐⭐", "설명": "점프력과 민첩성을 향상시켜줌"},
        "배드민턴": {"난이도": "⭐⭐", "설명": "가볍게 시작할 수 있는 라켓 스포츠"},
        "테니스": {"난이도": "⭐⭐⭐", "설명": "전신 근육 사용과 빠른 반사신경을 키움"},
        "클라이밍": {"난이도": "⭐⭐⭐⭐", "설명": "상체와 하체 근력, 집중력을 동시에 강화"}
    }
}

# ======================
# 제목 & 부제목
# ======================
st.markdown("<h1 style='text-align: center; color: #FF4B4B;'>🏋️ 맞춤 운동 추천 앱</h1>", unsafe_allow_html=True)
st.markdown("<p style='text-align: center; color: grey;'>당신의 목표와 라이프스타일에 맞는 운동을 추천해드립니다!</p>", unsafe_allow_html=True)
st.markdown("---")

# ======================
# 질문 폼
# ======================
with st.form("exercise_form"):
    st.subheader("💡 운동 정보를 입력해주세요")
    
    # 컬럼 배치
    col1, col2 = st.columns(2)
    with col1:
        목표 = st.selectbox("1️⃣ 운동 목적", ["체중 감량", "체력 강화", "근육 증가", "유연성 향상", "스트레스 해소"])
        운동강도 = st.selectbox("2️⃣ 운동 강도", ["가볍게", "보통", "강하게"])
        시간 = st.selectbox("3️⃣ 하루 운동 가능 시간", ["30분 이하", "30분~1시간", "1시간 이상"])
    with col2:
        실내외 = st.selectbox("4️⃣ 운동 장소", ["실내", "실외", "상관없음"])
        혼자같이 = st.selectbox("5️⃣ 혼자/같이", ["혼자", "같이", "상관없음"])
        관절부담 = st.selectbox("6️⃣ 관절 부담 고려?", ["네", "아니오"])
        장비사용 = st.selectbox("7️⃣ 장비 사용 여부", ["장비 필요 없음", "간단한 장비 가능", "헬스장 기구 사용 가능"])
    
    submitted = st.form_submit_button("✅ 운동 추천 받기")

# ======================
# 추천 결과 출력
# ======================
if submitted:
    st.subheader("🔥 추천 운동 종목")
    
    추천운동 = []
    
    # 조건별 추천 로직
    if 목표 == "체중 감량":
        추천운동.extend(list(exercise_data["유산소 운동"].keys()))
    elif 목표 == "체력 강화":
        추천운동.extend(list(exercise_data["스포츠"].keys()))
    elif 목표 == "근육 증가":
        추천운동.extend(list(exercise_data["근력 강화"].keys()))
    elif 목표 == "유연성 향상":
        추천운동.extend(list(exercise_data["유연성 & 재활"].keys()))
    elif 목표 == "스트레스 해소":
        추천운동.extend(list(exercise_data["스포츠"].keys()) + ["요가", "필라테스"])
    
    # 2~3개 랜덤 추천
    추천리스트 = random.sample(추천운동, min(3, len(추천운동)))
    
    # 카드 스타일로 출력
    for 운동 in 추천리스트:
        for 카테고리, 운동들 in exercise_data.items():
            if 운동 in 운동들:
                info = 운동들[운동]
                st.markdown(f"""
                <div style='background-color: #F0F8FF; padding: 15px; border-radius: 10px; margin-bottom: 10px;'>
                    <h3 style='color: #FF4B4B;'>{운동} ({카테고리})</h3>
                    <p>난이도: {info['난이도']}</p>
                    <p>설명: {info['설명']}</p>
                </div>
                """, unsafe_allow_html=True)

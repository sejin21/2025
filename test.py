import streamlit as st
import random

st.title("🏋️ 맞춤형 운동 종목 추천 앱")

st.subheader("당신의 라이프스타일에 맞는 운동을 찾아드릴게요!")

# 1. 사용자 질문
goal = st.selectbox("운동 목적을 선택하세요", 
    ["체중 감량", "근력 강화", "체력 향상", "스트레스 해소", "유연성 향상"])

place = st.radio("선호하는 운동 장소는?", ["실내", "실외", "상관없음"])
intensity = st.slider("운동 강도 (1=가볍게 ~ 5=강하게)", 1, 5, 3)
time = st.selectbox("하루 운동 가능 시간은?", ["30분 미만", "30분~1시간", "1시간 이상"])
partner = st.radio("운동을 누구와 하고 싶으세요?", ["혼자", "친구/팀", "상관없음"])
equipment = st.radio("운동 시 장비 사용 여부는?", ["장비 필요 없음", "간단한 소도구 사용", "헬스장 기구 사용 가능"])
risk = st.selectbox("운동에서 허용할 수 있는 부상 위험 정도는?", ["낮음 (안전 중요)", "보통", "높음 (도전적)"])
frequency = st.selectbox("주당 운동 횟수는?", ["1~2회", "3~4회", "5회 이상"])

# 2. 운동 데이터 (종목: {난이도, 설명})
exercise_dict = {
    "체중 감량": {
        "런닝": {"난이도": "⭐⭐", "설명": "유산소 운동의 대표 주자, 칼로리 소모에 효과적"},
        "자전거 타기": {"난이도": "⭐⭐⭐", "설명": "하체 근력을 강화하며 장시간 즐길 수 있음"},
        "수영": {"난이도": "⭐⭐⭐", "설명": "전신 운동으로 관절에 무리 없이 체지방 감량 가능"},
        "줄넘기": {"난이도": "⭐⭐⭐⭐", "설명": "짧은 시간에 많은 칼로리를 태울 수 있는 고강도 운동"},
        "스피닝": {"난이도": "⭐⭐⭐⭐", "설명": "실내에서 음악과 함께 즐기는 강도 높은 사이클 운동"}
    },
    "근력 강화": {
        "웨이트 트레이닝": {"난이도": "⭐⭐⭐⭐", "설명": "근육량 증가와 체형 개선에 효과적"},
        "필라테스": {"난이도": "⭐⭐⭐", "설명": "코어 강화와 유연성 향상에 도움"},
        "푸쉬업/스쿼트": {"난이도": "⭐⭐", "설명": "맨몸으로 언제든 할 수 있는 기본 근력 운동"},
        "크로스핏": {"난이도": "⭐⭐⭐⭐⭐", "설명": "고강도 근력·체력 종합 훈련"},
        "케틀벨 운동": {"난이도": "⭐⭐⭐", "설명": "전신 근육을 사용하는 근력+유산소 복합 운동"}
    },
    "체력 향상": {
        "등산": {"난이도": "⭐⭐⭐", "설명": "유산소와 근지구력을 동시에 향상"},
        "복싱": {"난이도": "⭐⭐⭐⭐", "설명": "심폐 지구력 향상과 스트레스 해소에 탁월"},
        "농구": {"난이도": "⭐⭐⭐", "설명": "순발력과 체력, 협동심을 기르는 팀 운동"},
        "축구": {"난이도": "⭐⭐⭐⭐", "설명": "전신 지구력 향상, 체중 감량에도 효과"},
        "로잉머신": {"난이도": "⭐⭐⭐", "설명": "전신을 사용하는 실내 지구력 운동"}
    },
    "스트레스 해소": {
        "요가": {"난이도": "⭐", "설명": "호흡과 스트레칭으로 심신 안정 효과"},
        "댄스": {"난이도": "⭐⭐⭐", "설명": "음악과 함께 즐기는 유산소 운동"},
        "테니스": {"난이도": "⭐⭐⭐", "설명": "전신을 활용한 레저 스포츠"},
        "클라이밍": {"난이도": "⭐⭐⭐⭐", "설명": "근력과 집중력을 동시에 기르는 스포츠"},
        "명상 스트레칭": {"난이도": "⭐", "설명": "긴장을 풀고 마음을 진정시키는 힐링 운동"}
    },
    "유연성 향상": {
        "스트레칭 루틴": {"난이도": "⭐", "설명": "매일 간단히 할 수 있는 기본 유연성 운동"},
        "에어리얼 요가": {"난이도": "⭐⭐⭐", "설명": "공중에서 하는 요가로 근력과 유연성을 동시에 향상"},
        "체조": {"난이도": "⭐⭐⭐", "설명": "균형감각과 유연성, 근력을 모두 기르는 운동"},
        "댄스 스트레칭": {"난이도": "⭐⭐", "설명": "댄스 동작과 스트레칭을 결합한 운동"},
        "필라테스": {"난이도": "⭐⭐⭐", "설명": "코어 안정성과 유연성을 강화"}
    }
}

# 3. 추천 로직
choice_list = list(exercise_dict[goal].keys())
recommended = random.choice(choice_list)
info = exercise_dict[goal][recommended]

# 조건 기반 메시지
extra_msg = []
if partner == "혼자":
    extra_msg.append("혼자서도 충분히 즐길 수 있어요.")
elif partner == "친구/팀":
    extra_msg.append("팀과 함께하면 더 재미있을 거예요!")

if equipment == "장비 필요 없음":
    extra_msg.append("별도의 장비 없이 바로 시작할 수 있습니다.")
elif equipment == "헬스장 기구 사용 가능":
    extra_msg.append("전문적인 기구를 활용할 수 있어요!")

if risk == "낮음 (안전 중요)" and info["난이도"].count("⭐") >= 4:
    extra_msg.append("고강도 운동이므로 무리하지 않도록 주의하세요.")

# 4. 결과 출력
st.subheader("✨ 오늘의 추천 운동 ✨")
st.write(f"👉 추천 운동: **{recommended}**")
st.write(f"📌 난이도: {info['난이도']}")
st.write(f"ℹ️ 설명: {info['설명']}")
if extra_msg:
    st.info("추가 팁: " + " ".join(extra_msg))

st.success("꾸준히 실천하는 것이 가장 중요합니다 💪")
